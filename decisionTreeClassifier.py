
from sklearn import tree
from scikitClassifier import ScikitClassifier

import graphviz
import os

class DecisionTreeClassifier(ScikitClassifier):

    def __init__(self):
        ScikitClassifier.__init__(self, tree.DecisionTreeClassifier())

    def export_as_pdf(self, feature_names, label_names):
        dot_data = tree.export_graphviz(self.classifier, out_file=None,
                                        feature_names=feature_names,
                                        class_names=label_names,
                                        filled=True, rounded=True,
                                        special_characters=True)

        graph = graphviz.Source(dot_data)

        files = os.listdir(self.dir_for_saving_images)
        real_count = (len(files) / 2) + 1


        graph.render(filename=f"Decision_Tree{int(real_count)}", directory=self.dir_for_saving_images)
